#!/bin/slash
make clean
make fuzz
# hack because './slash-fuzz' doesnt work yet
sudo cp slash-fuzz /bin/slash-fuzz

var successes = 0
var tests = 0

loop file in (find "test/" -name "*.slash") {
    $tests += 1
    if (slash-fuzz $file) as bool {
        $successes += 1
        echo $file "passed"
    } else {
        echo $file "FAILED!"
    }
}

echo "finished fuzz"
echo $successes "out of" $tests "passed"
